<link rel="import" href="../../../components/paper-radio-group/paper-radio-group.html">

<dom-module id="ts-radio-group">

    <style>

        :host {
            display: flex;
            flex-direction: column;
            --paper-radio-button-unchecked-color: var(--primary-text-color);
        }

        :host.error label{
            color: red;
        }

        :host.error .error-message {
            display: inline;
        }

        paper-radio-group, content {
            display: flex;
            flex-direction: row;
        }

        :host.required label {
            font-weight: bold;
        }

        label {
            margin-top: 1.5rem;
            padding-top: 0.5rem;
            display: block;
            color: var(--secondary-text-color);
            letter-spacing: 0.011em;
        }

        label.disabled {
            opacity: 0.33;
        }

        .error-message {
            margin: 0;
            display: none;
            color: red;
            font-size: 90%;
            padding: 1rem;
        }

    </style>

    <template>

        <label id="label" class$="{{_isDisabled(disabled)}}">{{label}}</label>
        <paper-radio-group id="radio-group" class="{{class}}" attr-for-selected="{{attrForSelected}}" selected="{{selected}}">
            <content id="content"></content>
            <p id="error-message" class="error-message">{{errorMessage}}</p>
        </paper-radio-group>

    </template>

</dom-module>

<script>

    Polymer({

        is: 'ts-radio-group',

        behaviors: [
            Polymer.IronFormElementBehavior,
        ],

        get selectedItem() {
            return this.$['radio-group'].selectedItem;
        },

        validate: function() {
            var valid = !this.required || (this.required && !!this.$['radio-group'].selectedItem);
            valid ? this._hideError() : this._showError();
            return valid;
        },

        reset: function() {
            this.selected = '';
            this.fire('change');
        },

        _showError: function() {
            this.classList.add('error');
        },

        _hideError: function() {
            this.classList.remove('error');
        },

        _isDisabled: function(disabled) {
            return disabled ? 'disabled' : '';
        }

    });

</script>